<!DOCTYPE html>
<html>

<head>
	<title>thunder docs</title>
	<style>
	</style>
</head>

<body>
	<form id="form" action="">
		<p>edit file:</p>
		<input id="filename" autocomplete="off" onchange="filechange()"/>
		<p>content</p>
		<textarea id="text" autocomplete="off" onchange="update()" rows="25" cols="100"></textarea>
    </form>
	<h1 id="status"></h1>
    <script src="/socket.io/socket.io.js"></script>

    <script>
      var socket = io();

      var textbox = document.getElementById('text');
	  var filename = document.getElementById('filename');
	  var statu = document.getElementById('status');

	  var filename = "file.txt"

      socket.on('update', function(msg) {
		  if (msg.status == true) {
			statu.innerHTML = "ready"
		  }
        textbox.value = msg.msg
      });

	  function update() {
		  statu.innerHTML = "saving..."
		  socket.emit('update', {msg: textbox.value,filename:filename.value})
	  }

	  function filechange() {
		  statu.innerHTML = "changing file..."
		  socket.emit('filechange', filename.value)
	  }
    </script>
  </body>
</html>